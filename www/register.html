<ons-page id="register">

    <div style="text-align: center; margin-top: 30px;">
        <p>
            <ons-input id="Register_mailaddress" modifier="underbar" placeholder="メールアドレス" float></ons-input>
        </p>
        <p>
            <ons-input id="Register_password" modifier="underbar" type="password"
                       placeholder="パスワード(半角英小文字大文字数字を4文字以上15文字以下)" float></ons-input>
        </p>
        <p>
            <ons-input id="Register_repassword" modifier="underbar" type="password" placeholder="パスワード(再入力)"
                       float></ons-input>
        </p>
        <p style="margin-top: 30px;">
            <ons-button onclick="Register_Account()">登録する</ons-button>
        </p>
        <p style="margin-top: 30px;">
            <ons-button onclick="readOnlyMode()">登録せずに利用する</ons-button>
        </p>
    </div>

    <script>
        // 「登録する」ボタンを押されたときの処理
        var Register_Account = function () {
            var alertStr = "";

            var mail = document.getElementById('Register_mailaddress').value;
            var pass = document.getElementById('Register_password').value;
            var pass2 = document.getElementById('Register_repassword').value;


            var patternMail = /^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@[A-Za-z0-9_.-]+\.[A-Za-z0-9]+$/;
            var patternPass = /^[0-9a-zA-Z]{4,15}$/;

            if (mail.match(patternMail) == null) {
                alertStr += "メールアドレスを正しい形式で入力してください<br><br>"
            }
            if (pass.match(patternPass) == null || pass2.match(patternPass) == null) {
                alertStr += "パスワードは半角英小文字大文字数字の4文字以上15文字以下で入力してください<br><br>"
            }
            if (pass1 !== pass2) {
                alertStr += "入力されたパスワードが一致しません"
            }

            if (alertStr) {
                // Todo メールアドレスとパスワードが正しい形式で入力された場合の処理を書く


                localStorage.setItem("isLoginned", true);
                localStorage.setItem("isReadOnly", false);

                // 投句に成功した場合に実行するalert
                ons.notification.alert("登録が完了しました！！");
                location.reload();

                // 投句処理を終えたらmain.htmlへ遷移する
                // main.htmlへpushするか、popしてindexからmainへ遷移するか

                // myNavigator.popPage()
                // document.querySelector('#myNavigator').pushPage('main.html', {data: {title: 'Register'}});

            } else {
                ons.notification.alert({
                    // message: 'メッセージ',
                    messageHTML: alertStr,
                    // もしくはmessageHTML: '<div>HTML形式のメッセージ</div>',
                    title: '登録失敗！！',
                    buttonLabel: 'OK',
                    animation: 'default', // もしくは'none'
                    // modifier: 'optional-modifier'
                    callback: function () {
                        // ボタンがタップされた
                    }
                });

            }
        };

        var readOnlyMode = function () {
            isReadOnly = true;
            localStorage.setItem("isReadOnly", isReadOnly);
            location.reload();
        };
    </script>
</ons-page>